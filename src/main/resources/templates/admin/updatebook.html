
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Update Book</title>
    <link rel="stylesheet" th:href="@{/css/admin/updatebook.css}" />
    <link rel="stylesheet" th:href="@{https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css}">
  </head>
  <body>
   <!-- Nav bar-->
    <div class="nav">
        <!-- Left-aligned search container -->
        <div class="search-container">
             <span class="title"><a th:href="@{/admin/adminhomepage}">Book Store</a></span>
            <input type="text" class="search-input" placeholder="Search books">
            <button class="search-button">Search</button>
        </div>
        <!-- Right-aligned navigation menu -->
        <ul>
             <li><a th:href="@{/admin/viewbook}">Book List</a></li>
                 <li><a th:href="@{/admin/addbook}">New Book Register</a></li>
                 <li><a th:href="@{/admin/bookorder}">All Orders</a></li>
                 <li><a th:href="@{/admin/adminprofile}"><i class="fa-solid fa-user"></i></a></li>
        </ul>
    </div> 
    
     <div class="container">
        <h2>Update Book</h2>
        <form th:action="@{/admin/updatebook/{id}/saved(id=${book.id})}" method="POST" enctype="multipart/form-data" th:object="${updatedBook}">
            <div class="form-group">
                <label for="bookname">Book Title:</label>
                <input type="text" id="bookname" name="bookname" th:field="*{name}" required>
            </div>
            <br>
            <div class="form-group">
                <label for="author">Author:</label>
                <input type="text" id="bookauthor" name="bookauthor" th:field="*{author}" required>
            </div>
            <br>
            <div class="form-group">
                <label for="price">Price:</label>
              <input type="number" id="price" name="price" min="0" th:field="*{price}" required>
            </div>
            <br>
            <div class="form-group">
                <label for="photo">Book Photo:</label>
                <img th:src="@{'/img/book/'+ ${book.imageId}}" alt="Book Image" class="preview-image">
                 <input type="file" id="bookImage" name="bookImage" accept="image/*">
            </div>
            <br>
            <div class="form-group">
                <button type="submit">Update</button>
            </div>
        </form>
    </div>  
            
      <script>
  document.getElementById("price").addEventListener("input", function (e) {
    // Allow only numbers and optionally decimals
    this.value = this.value.replace(/[^0-9.]/g, ""); // Remove anything that's not a number or a dot
    // Prevent multiple dots
    if ((this.value.match(/\./g) || []).length > 1) {
      this.value = this.value.replace(/\.+$/, ""); // Remove extra dots
    }
  });
</script>

  </body>
</html>
